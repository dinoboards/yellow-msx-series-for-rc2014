−−−−−−−−−−−−−−−−−−−−−−−−−−−
  ＭＥＭＴＥＳＴ．ＣＯＭ　説明書

  1995.5.16  藤本 昌利 (NIFTY-ID : MCN00585)
−−−−−−−−−−−−−−−−−−−−−−−−−−−

１．構成品
　　 MEMTEST.JPN ･･････････ この説明書です
    MEMTEST.COM ･･････････ ﾏｯﾊﾟ対応ﾒﾓﾘのﾃｽﾄﾌﾟﾛｸﾞﾗﾑ

２．概要
　　ＭＥＭＴＥＳＴは，マッパ対応メモリをテストするためのＭＳＸ−ＤＯＳ１用
　プログラムです．当初マッパ対応メモリの動作確認のために作成したテストプロ
  グラム（BASIC用）を改良し，ＭＳＸ−ＤＯＳ１用にしたものです．

　＜動作環境＞
  　・ＭＳＸ２，ＭＳＸ２＋の場合
  　　ＭＳＸ−ＤＯＳ１環境で動作します．
  　　マッパレジスタを直接操作しているので，ＭＳＸ−ＤＯＳ２では動作しません．
  　・ＭＳＸｔｕｒｂｏＲの場合
  　　ＭＳＸ−ＤＯＳ１（Ｚ８０モード）環境で動作します．
  　　マッパレジスタを直接操作しているので，ＭＳＸ−ＤＯＳ２では動作しません．

　＜特徴＞
 (1)プログラムがロードされているメモリもテストできるようにするため，メモリの
　　内容を壊さずにテストを行うようにしています．このテストは，メモリの値の反
　　転値をメモリに書き込んで比較，再度その反転値を書き込んで比較することで実
　　現しています．
 (2)セグメント単位で，チェックサムを２回計算することで，メモリのデータ化けを
 　 チェックできるようにしています．すべてのエラーを検出できるわけではないで
    すが，単なる読み書きテストでは検出できないエラーも検出できます．
 (3)テストするスロットを指定できるので，本体の内蔵メモリ，または本体スロット
    に挿入したメモリカートリッジのテストができます．
 (4)マッパ対応メモリのマッパレジスタの動作テストと，マッパレジスタで選択した
　　セグメントメモリ(16KB)の読み書きテストを行います．

３．使用方法

   A>MEMTEST [#pe | #p | /H]

     省略 : 現在使用しているﾒﾓﾘｽﾛｯﾄをﾃｽﾄします
     #pe  : ﾃｽﾄするｽﾛｯﾄを指定します(p:基本ｽﾛｯﾄ, e:拡張ｽﾛｯﾄ)
     #p   : ﾃｽﾄするｽﾛｯﾄを指定します(p:基本ｽﾛｯﾄ)
     /H   : 使用方法を表示します

  例１）A>MEMTEST  #1
      基本スロット１のメモリテストを行います．

  例２）A>MEMTEST  #30
      本体の内蔵スロット＃３０のメモリテストを行います．

  例３）A>MEMTEST
　　  ＭＳＸが現在使用しているプライマリメモリのテストを行います．本体のみで
　　　実行すると，内蔵メモリのテストになります．

  例４）A>MEMTEST  /H
      MEMTEST.COMの使用方法を表示します．

４．メッセージ表示
    ＭＥＭＴＥＳＴを実行したときのメッセージ表示です．テスト結果により，
  いくつかの原因のヒントが得られると思います．

 (1)メモリが正常なとき

    Memory Test Start.
    Test Memory slot #1                ← ﾃｽﾄするｽﾛｯﾄを表示
    Memory Mapper Segment 00 - 3F      ← 有効なｾｸﾞﾒﾝﾄを16進で表示(例は1024KB)
    ................................   ← ﾃｽﾄの進行を表示
    Memory Test Completed. Memory OK!  ← 正常終了(ﾒﾓﾘにｴﾗｰがない)

 (2)メモリに読み書きエラーがあるとき

    Memory Test Start.
    Test Memory slot #1                ← ﾃｽﾄするｽﾛｯﾄを表示
    Memory Mapper Segment 00 - 3F      ← 有効なｾｸﾞﾒﾝﾄを16進で表示(例は1024KB)
    .............                      ← ﾃｽﾄの進行を表示
    Memory Read/Write Error            ← ﾒﾓﾘの読み書きｴﾗｰ
    > segment 04  offset 10FF             ｴﾗｰ箇所のｾｸﾞﾒﾝﾄとｵﾌｾｯﾄを16進で表示
    ........
    Memory Test End.                   ← 終了

　 → メモリの一部が正常に読み書きできない．メモリＩＣの不良が考えられる．

 (3)メモリにデータ化けがあるとき

    Memory Test Start.
    Test Memory slot #1                ← ﾃｽﾄするｽﾛｯﾄを表示
    Memory Mapper Segment 00 - 3F      ← 有効なｾｸﾞﾒﾝﾄを16進で表示(例は1024KB)
    .............                      ← ﾃｽﾄの進行を表示
    Memory Checksum Error              ← ﾒﾓﾘｾｸﾞﾒﾝﾄのﾁｪｯｸｻﾑが違う
    > segment 06                          ｴﾗｰ箇所のｾｸﾞﾒﾝﾄを16進で表示
    ........
    Memory Test End.                   ← 終了

　 → ｾｸﾞﾒﾝﾄ単位で, ﾁｪｯｸｻﾑを２回計算するが，ﾁｪｯｸｻﾑが一致しない．つまり２回の
　　　ﾁｪｯｸｻﾑ計算の間にメモリのデータ化けが起こった．リフレッシュ関係回路の動
      作の問題と考えられる．

 (4)マッパが仕様通りに動作していないとき

    Memory Test Start.
    Test Memory slot #1                ← ﾃｽﾄするｽﾛｯﾄを表示
    Memory Mapper Segment 00 - 07      ← 有効なｾｸﾞﾒﾝﾄを16進で表示.
    ...........

   → 例では1024KBのとき00-3Fと表示されるはずだが00-07と表示されている
  　  (128KBのみ有効). ﾏｯﾊﾟﾚｼﾞｽﾀの出力8bitのうち3bitだけが有効と考えら
  　　れる. ﾏｯﾊﾟﾚｼﾞｽﾀの関係の配線をﾁｪｯｸする必要がある．

 (5)メモリがマッパ対応ではないとき

    Memory Test Start.
    Test Memory slot #1                ← ﾃｽﾄするｽﾛｯﾄを表示
    Not Mapper RAM !!                  ← ﾏｯﾊﾟ対応RAMではない
    Memory Test End.                   ← 終了

 (6)ＲＡＭではないとき

    Memory Test Start.
    Test Memory slot #1                ← ﾃｽﾄするｽﾛｯﾄを表示
    Not RAM !!                         ← RAMではない
    Memory Test End.                   ← 終了

 (7)／Ｈ指定またはパラメータエラーのとき

　　USAGE : MEMTEST [#pe | #p | /H]
  　　#pe : slot#(primary,expanded)
  　　#p  : slot#(primary)
  　　/H  : display usage

５．メモリマッパについて
　　メモリマッパ方式は，メモリを１６ＫＢ単位のセグメントに分割し，４つのペ
　ージに割当てて管理する方式で，最大４ＭＢ（１６ＫＢ×２５６）のメモリ管理
　ができます．マッパレジスタは，１６ＫＢのメモリセグメントを各ページに対応
　させるもので，ページ０〜３に対応して４個あります．
　　５１２ＫＢの場合は，１６ＫＢ×３２ですので，３２個のセグメントがありま
　す．このためマッパレジスタに書き込む値は０〜３１になります．マッパレジス
　タは書き込みのみで，読み出しはしません．

  　I/Oｱﾄﾞﾚｽ   Write      Read    機能
   　0FCH      ｾｸﾞﾒﾝﾄ値    −　 　ﾍﾟｰｼﾞ0 (0000H〜3FFFH)のﾒﾓﾘｾｸﾞﾒﾝﾄの割付け
   　0FDH      ｾｸﾞﾒﾝﾄ値    −　 　ﾍﾟｰｼﾞ1 (4000H〜7FFFH)のﾒﾓﾘｾｸﾞﾒﾝﾄの割付け
   　0FEH      ｾｸﾞﾒﾝﾄ値    −　 　ﾍﾟｰｼﾞ2 (8000H〜BFFFH)のﾒﾓﾘｾｸﾞﾒﾝﾄの割付け
   　0FFH      ｾｸﾞﾒﾝﾄ値    −　   ﾍﾟｰｼﾞ3 (C000H〜FFFEH)のﾒﾓﾘｾｸﾞﾒﾝﾄの割付け

６．取扱い上のお願い

  　本ソフトは，フリーソフトウェアとします．著作権は放棄されていませんが，
  以下に示すような作者の認める範囲内で取扱いは自由です．

 (1)無保証です
    誠に不本意な事ながら，もし本ソフトの使用が原因と思われる損害が発生して
    しまった場合でも，作者は一切責任を負えません．もし，そのようなことが発
    生した場合は，その詳細を直ちに作者までご連絡下さい。できるだけ，不具合
    を改善すべく努力します．

 (2)基本的に頒布・転載は自由です
　　一般的な会員制のＢＢＳへの転載，個人的な譲渡は営利を目的としない限り，
　　自由に行ってください．

 (3)改変を加えて頒布しないこと
　　オリジナルのアーカイブ内容は改変しないで頒布してください．

    1995年5月14日     NIFTY-ID：MCN00585    藤本  昌利
